#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check if any files in client/ directory are being committed
if git diff --cached --name-only | grep -q "^client/"; then
  # Increment frontend build number and time before committing
  npm --prefix client run bump || {
    echo "[husky] bump failed" >&2
    exit 1
  }
  # Stage updated build-info.json
  if [ -f "client/build-info.json" ]; then
    git add client/build-info.json
  fi
else
  echo "[husky] No changes in client/ directory, skipping bump"
fi
